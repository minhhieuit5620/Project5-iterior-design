<div class="content">
    <div class="container-fluid">
        <div class="row">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modelId">
              Thêm mới 
            </button>
            
            <!-- Modal -->
            <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                            <div class="modal-header">
                                    <h5 class="modal-title">Nhập thông tin người dùng mới</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                </div>
                        <div class="modal-body">
                            <div class="container-fluid">
                                <form [formGroup]="registerForm" (ngSubmit)="registerForm.value && onSubmit()">
                                    <div class="form-row">
                                        <div class="form-group col-5">
                                            <label>Họ tên</label>
                                            <input type="text" formControlName="name" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" />
                                            <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
                                                <div *ngIf="f.name.errors.required">Họ tên không thể bỏ trống</div>
                                            </div>
                                        </div>
                                        <div class="form-group col-5">
                                            <label>Số điện thoại</label>
                                            <input type="text" formControlName="phone" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" />
                                            <div *ngIf="submitted && f.phone.errors" class="invalid-feedback">
                                                <div *ngIf="f.phone.errors.required">Số điện thoại không thể bỏ trống</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-3">
                                            <label>Chức vụ</label>
                                            <select formControlName="rol" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.rol.errors }">
                                                <option value=""></option>
                                                <option class="text-center" value="1">User</option>
                                                <option class="text-center" value="2">Admin</option>
                                                <option class="text-center" value="3">Manager</option>
                                                <option class="text-center" value="4">Boss</option>
                                            </select>
                                            <div *ngIf="submitted && f.rol.errors" class="invalid-feedback">
                                                <div *ngIf="f.rol.errors.required">Chức vụ không thể bỏ trống</div>
                                            </div>
                                        </div>
                                        <!-- <div class="form-group col-5">
                                            <label>First Name</label>
                                            <input type="text" formControlName="firstName" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" />
                                            <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                                                <div *ngIf="f.firstName.errors.required">First Name is required</div>
                                            </div>
                                        </div> -->
                                       
                                        <div class="form-group col-3">
                                            <label>Giới tính</label>
                                            <select formControlName="gender" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.title.errors }">
                                                <option value=""></option>
                                                <option class="text-center" value="1">Nam</option>
                                                <option class="text-center" value="0">Nữ</option>
                                               
                                            </select>
                                            <div *ngIf="submitted && f.gender.errors" class="invalid-feedback">
                                                <div *ngIf="f.gender.errors.required">Giới tính không thể bỏ trống</div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <label>Tên đăng nhập</label>
                                            <input type="text" formControlName="userName" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.userName.errors }" />
                                            <div *ngIf="submitted && f.userName.errors" class="invalid-feedback">
                                                <div *ngIf="f.userName">Không thể bỏ trống </div>
                                                <!-- <div *ngIf="f.userName">Tên đăng nhập không được bỏ trống</div> -->
                                            </div>
                                        </div>
                                        <div class="form-group col">
                                            <label>Ngày bắt đầu làm việc</label>
                                            <input type="date" formControlName="dayStart" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.dob.errors }" />
                                            <div *ngIf="submitted && f.dayStart.errors" class="invalid-feedback">
                                                <div *ngIf="f.dayStart">Không thể bỏ trống </div>
                                                <div *ngIf="f.dayStart">Date of Birth must be a valid date in the format YYYY-MM-DD</div>
                                            </div>
                                        </div>
                                        <!-- <div class="form-group col">
                                            <label>Email</label>
                                            <input type="text" formControlName="email" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
                                            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                                                <div *ngIf="f.email.errors.required">Email không thể bỏ trống</div>
                                                <div *ngIf="f.email.errors.email">Email không hợp lệ</div>
                                            </div>
                                        </div> -->
                                        <div class="form-group col">
                                            <label>Địa chỉ</label>
                                            <input type="text" formControlName="address" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.address.errors }" />
                                            <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
                                                <div *ngIf="f.address">Địa chỉ không thể bỏ trống</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <label>Password</label>
                                            <input type="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
                                            <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                                                <div *ngIf="f.password.errors.required">Mật khẩu không thể bỏ trống</div>
                                                <div *ngIf="f.password.errors.minlength">Mật khẩu phải chứa ít nhất 6 kí tự</div>
                                            </div>
                                        </div>
                                        <div class="form-group col">
                                            <label>Confirm Password</label>
                                            <input type="password" formControlName="confirmPassword" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" />
                                            <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                                                <div *ngIf="f.confirmPassword.errors.required">Xác nhận mật khẩu không thể bỏ trống</div>
                                                <div *ngIf="f.confirmPassword.errors.mustMatch">Mật khẩu không trùng khớp</div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="form-group form-check">
                                        <input type="checkbox" formControlName="acceptTerms" id="acceptTerms" style="border:1px solid black;"  [ngClass]="{ 'is-invalid': submitted && f.acceptTerms.errors }" />
                                       
                                        <label for="acceptTerms" class="form-check-label">Accept Terms & Conditions</label>
                                        <div *ngIf="submitted && f.acceptTerms.errors" class="invalid-feedback">Accept Ts & Cs is required</div>
                                    </div> -->
                                    <div class="text-center">
                                        <button class="btn btn-primary mr-1">Thêm mới</button>
                                        <button type="button" (click)="onSubmit()" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                                        <!-- <button class="btn btn-secondary" type="reset" (click)="onReset()" >Hủy bỏ</button> -->
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary">Lưu</button>
                        </div> -->
                    </div>
                </div>
            </div>
            
            <script>
                $('#exampleModal').on('show.bs.modal', event => {
                    var button = $(event.relatedTarget);
                    var modal = $(this);
                    // Use above variables to manipulate the DOM
                    
                });
            </script>
            <div class="col-md-12">
                <div class="card">

                    <div class="card-header card-header-primary">
                        <h4 class="card-title ">Danh sách người dùng</h4>
                        <!-- <p class="card-category"> Here is a subtitle for this table</p> -->
                    </div>

                    <div class="card-body">
                        <div class="table-responsive table-hover">
                            <table class="table">
                                <thead class=" text-primary">
                                    <th>
                                       STT
                                    </th>
                                    <th>
                                        Tên người dùng
                                    </th>
                                    <th >
                                        
                                        Giới tính
                                    </th>
                                    <th>
                                        Địa chỉ
                                    </th>
                                    <th>
                                        Điện thoại
                                    </th>
                                    <th>
                                        Chức vụ
                                    </th>
                                    <th>
                                        Ngày vào làm
                                    </th>
                                    <th class="text-center">
                                        Thao tác
                                    </th>
                                </thead>
                                <tbody>

                                    <tr *ngFor="let item of datas;let i=index;">
                                        <td>
                                            {{i+1}}
                                        </td>
                                        <td>
                                            {{item.name}}
                                        </td>
                                        <td>
                                            {{item.gender? "Nam" : "Nữ"}}                                
                                        </td>
                            
                                        <td>
                                            {{item.address}}
                                        </td>
                                        <td class="text-primary">
                                            <span> {{item.phone}}
                                                <!-- {{(item.Price | currency: " ").replace('.00',' ')}} -->
                                            </span>
                                            <!-- <option class="text-center" value="1">User</option>
                                            <option class="text-center" value="2">Admin</option>
                                            <option class="text-center" value="3">Manager</option>
                                            <option class="text-center" value="4">Boss</option> -->
                                        </td>
                                        <td [ngSwitch]="item.rol">
                                            <p *ngSwitchCase="'1'">User</p>
                                            <p *ngSwitchCase="'2'">Admin</p>
                                            <p *ngSwitchCase="'3'">Manager</p>
                                            <p *ngSwitchCase="'4'">Boss</p>
                                            <!-- {{item.rol}} -->
                                        </td>
                                        <td>
                                            {{item.dayStart|date: 'dd/MM/yyyy'}}
                                        </td>
                                        <td>
                                          
                                           <!-- <button class="btn btn-info" (click)="onselect(item)">sửa</button> -->
                                           
                                           <a class="btn btn-info" data-toggle="modal" href='#modal-id' (click)="onselect(item)">sửa</a>
                                           <div class="modal fade" id="modal-id">
                                               <div class="modal-dialog">
                                                   <div class="modal-content">
                                                       <div class="modal-header">
                                                        <h4 class="modal-title">Sửa người dùng {{selectedUS.name}}</h4>
                                                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                          
                                                       </div>
                                                       <div class="modal-body">
                                                            <div class="container-fluid">
                                    
                                                                
                                                                <div class="form-group ">
                                                                    <label>Tên người dùng </label>
                                                                    <input type="text" name="id" [(ngModel)]="selectedUS.name"  class="form-control">
                                                                </div>
                                                               
                                                                <div class="form-group">
                                                                <label>Địa chỉ</label>
                                                                <input type="text" name="name" [(ngModel)]="selectedUS.address"  class="form-control">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Giới tính</label>
                                                                    <!-- <td [ngSwitch]="item.rol">
                                                                        <p *ngSwitchCase="'1'">User</p>
                                                                        <p *ngSwitchCase="'2'">Admin</p>
                                                                        <p *ngSwitchCase="'3'">Manager</p>
                                                                        <p *ngSwitchCase="'4'">Boss</p>
                                                                     
                                                                    </td> -->
                                                                    <select class="form-control"  [(ngModel)]="selectedUS.gender"  name="" id="">
                                                                        <option value="1">Nam</option>
                                                                        <option value="0">Nữ</option>
                                                                    </select>
                                                                    <!-- <input type="text" name="name" [(ngModel)]="selectedUS.gender"  class="form-control"> -->
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Điện thoại</label>
                                                                    <input type="text" name="name" [(ngModel)]="selectedUS.phone"  class="form-control">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Chức vụ</label>
                                                                    <input type="text" name="name" [(ngModel)]="selectedUS.rol"  class="form-control">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Ngày vào làm</label>
                                                                    <input type="text" name="name"  [(ngModel)]="selectedUS.dayStart" [value]="selectedUS.dayStart | date: 'dd/MM/yyyy'"  class="form-control">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Tên đăng nhập</label>
                                                                    <input type="text" name="userName" [(ngModel)]="selectedUS.userName"  class="form-control">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Password</label>
                                                                    <input type="password" name="password" class="form-controlname" [(ngModel)]="selectedUS.password"  class="form-control">
                                                                </div>
                                                            </div>
                                                        </div>
                                                       <div class="modal-footer">
                                                           <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                                                           <button type="button" (click)="putUser(selectedUS.idUser)" class="btn btn-primary">Lưu chỉnh sửa</button>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                           
                                           <!-- <button class="btn btn-dangger">xóa</button> -->


                                           
                                           <a class="btn btn-dangger" data-toggle="modal" href='#modal-delete' (click)="onselect(item)">xóa</a>
                                           <div class="modal fade" id="modal-delete">
                                               <div class="modal-dialog">
                                                   <div class="modal-content">
                                                       <div class="modal-header">
                                                        <h4 class="modal-title">Lưu ý</h4>
                                                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                           
                                                       </div>
                                                       <div class="modal-body">
                                                        Bạn có muốn xóa sản phẩm này? {{selectedUS.idUser}}
                                                       </div>
                                                       <div class="modal-footer">
                                                           <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                                                           <button type="button"  (click)="deleteUser(selectedUS.idUser)" class="btn btn-primary">Xóa</button>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                           
                                           
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- main app container -->

            <!-- 
<div class="card m-3">
    <h5 class="card-header">Angular 10 Reactive Form Validation</h5>
    <div class="card-body">
       
    </div>
</div> -->